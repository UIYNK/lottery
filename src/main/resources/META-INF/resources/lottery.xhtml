<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      dir="rtl"
      lang="fa">
<h:head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>قرعه کشی</title>
    <h:outputStylesheet library="css" name="styles/root-font-size.css"/>
    <h:outputStylesheet library="css" name="primeIcons/primeicons.css"/>
    <h:outputStylesheet library="css" name="fonts/vazir.css"/>
    <h:outputStylesheet library="webjars" name="primeflex/3.3.1/primeflex.min.css"/>
    <h:outputStylesheet library="css" name="styles/style.css"/>
    <h:outputScript library="js" name="index.js"/>
    <style>
        * {
            font-family: 'Vazirmatn', sans-serif;
        }
    </style>
</h:head>
<h:body>
    <div class="flex justify-content-center align-items-center body-background">
        <h:form id="digitsForm">
            <div class="flex flex-column align-items-center gap-6">
                <div class="flex flex-column gap-3">
                    <div class="flex flex-nowrap gap-3 justify-between p-16 numbers-background" dir="ltr">
                        <p:inputNumber id="digit1" decimalPlaces="0" minValue="0" maxValue="9"
                                       value="#{lotteryView.individualNumber[4]}" keydown="focusNextInput($event)"
                                       inputStyleClass="w-8rem h-8rem p-3 border-circle shadow-1 text-center text-7xl"/>
                        <p:inputNumber id="digit2" decimalPlaces="0" minValue="0" maxValue="9"
                                       value="#{lotteryView.individualNumber[3]}"
                                       inputStyleClass="w-8rem h-8rem p-3 border-circle shadow-1 text-center text-7xl"/>
                        <p:inputNumber id="digit3" decimalPlaces="0" minValue="0" maxValue="9"
                                       value="#{lotteryView.individualNumber[2]}"
                                       inputStyleClass="w-8rem h-8rem p-3 border-circle shadow-1 text-center text-7xl"/>
                        <p:inputNumber id="digit4" decimalPlaces="0" minValue="0" maxValue="9"
                                       value="#{lotteryView.individualNumber[1]}"
                                       inputStyleClass="w-8rem h-8rem p-3 border-circle shadow-1 text-center text-7xl"/>
                        <p:inputNumber id="digit5" decimalPlaces="0" minValue="0" maxValue="9"
                                       value="#{lotteryView.individualNumber[0]}"
                                       inputStyleClass="w-8rem h-8rem p-3 border-circle shadow-1 text-center text-7xl"/>
                    </div>
                    <div class="flex flex-nowrap ">
                        <p:commandButton value="انتخاب برنده" styleClass="h-4rem ui-button-success btn-styles"
                                         action="#{lotteryView.pickIndividualSerialNumber()}" update="picks"/>
                        <p:commandButton value="انجام خودکار ادامه قرعه کشی"
                                         styleClass="h-4rem ui-button-warning btn-styles"
                                         action="#{lotteryView.autoPickRemainingPrizes()}" update="picks"/>
                    </div>
                </div>
                <div class="flex flex-column gap-1">
                    <p:commandButton value="دانلود نتایج"
                                     styleClass="rounded-button ui-button-secondary align-self-end"
                                     style="font-size: 0.7rem !important;"
                                     icon="pi pi-save">
                        <p:dataExporter type="xlsxstream" target="picks" fileName="picks"/>
                    </p:commandButton>
                    <p:dataTable id="picks" var="lotteryPick" value="#{lotteryView.currentPicks}" rowIndexVar="index"
                                 emptyMessage="هنوز قرعه کشی انجام نشده است"
                                 scrollable="true"
                                 scrollHeight="300"
                                 style="max-width: 48rem !important;"
                                 dir="rtl">
                        <p:column headerText="ردیف" styleClass="w-fit">
                            <h:outputText value="#{index+1}" lang="fa"/>
                        </p:column>

                        <p:column headerText="سریال قرعه کشی">
                            <h:outputText value="#{lotteryPick.ticket.serialNumber}"/>
                        </p:column>

                        <p:column headerText="جایزه">
                            <h:outputText value="#{lotteryPick.prize.title}"/>
                        </p:column>
                    </p:dataTable>
                </div>
            </div>

        </h:form>
    </div>

</h:body>
</html>